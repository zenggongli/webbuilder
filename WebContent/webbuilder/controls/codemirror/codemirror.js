var CodeMirror=(function(){function v(aR,aN){var cd={},bq=v.defaults;for(var aE in bq){if(bq.hasOwnProperty(aE)){cd[aE]=(aN&&aN.hasOwnProperty(aE)?aN:bq)[aE]}}var aI=document.createElement("div");aI.className="CodeMirror"+(cd.lineWrapping?" CodeMirror-wrap":"");aI.innerHTML='<div style="overflow: hidden; position: relative; width: 3px; height: 0px;"><textarea style="position: absolute; padding: 0; width: 1px; height: 1em" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scrollbar"><div class="CodeMirror-scrollbar-inner"></div></div><div class="CodeMirror-scroll" tabindex="-1"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative; z-index: 0"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden;"></div><pre class="CodeMirror-cursor">&#160;</pre><pre class="CodeMirror-cursor" style="visibility: hidden">&#160;</pre><div style="position: relative; z-index: -1"></div><div></div></div></div></div></div></div>';if(aR.appendChild){aR.appendChild(aI)}else{aR(aI)}var b9=aI.firstChild,bt=b9.firstChild,br=aI.lastChild,bX=br.firstChild,ct=bX.firstChild,aL=ct.firstChild,a3=aL.firstChild,bC=aL.nextSibling.firstChild,az=bC.firstChild,bj=az.nextSibling,bc=bj.nextSibling,bn=bc.nextSibling,au=bn.nextSibling,aQ=b9.nextSibling,cz=aQ.firstChild;cS();cK();if(t){bt.style.width="0px"}if(!g){br.draggable=true}bC.style.outline="none";if(cd.tabindex!=null){bt.tabIndex=cd.tabindex}if(cd.autofocus){bK()}if(!cd.gutter&&!cd.lineNumbers){aL.style.display="none"}if(n){b9.style.height="1px",b9.style.position="absolute"}if(f){aQ.className+=(bI()?" cm-sb-overlap":" cm-sb-nonoverlap")}else{if(D){aQ.className+=" cm-sb-ie7"}}try{cH("x")}catch(cl){if(cl.message.match(/runtime/i)){cl=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)")}throw cl}var ck=new A(),aB=new A(),c5;var co,cN=new j([new ak([new e("")])]),cu,cw;b5();var dd={from:{line:0,ch:0},to:{line:0,ch:0},inverted:false};var cv,by,a5,bE=0,cg=0,bi,cB=false,cG=false;var cD,cj,aG,c3,aU,bm,aX,cP;var bk=0,c6=0,bW=0,bY=0;var ci;var bO="",cT=false,bx=true;var at={};av(function(){a1(cd.value||"");cD=false})();var bf=new l();s(br,"mousedown",av(cx));s(br,"dblclick",av(b8));s(bC,"selectstart",W);if(!Q){s(br,"contextmenu",a7)}s(br,"scroll",bV);s(aQ,"scroll",bV);s(aQ,"mousedown",function(){setTimeout(bK,0)});s(br,"mousewheel",aA);s(br,"DOMMouseScroll",aA);s(window,"resize",function(){cq(true)});s(bt,"keyup",av(cy));s(bt,"input",aV);s(bt,"keydown",av(cp));s(bt,"keypress",av(bu));s(bt,"focus",da);s(bt,"blur",aJ);if(cd.dragDrop){s(br,"dragstart",aM);function bN(dg){if(cd.onDragEvent&&cd.onDragEvent(cm,R(dg))){return}x(dg)}s(br,"dragenter",bN);s(br,"dragover",bN);s(br,"drop",av(aq))}s(br,"paste",function(){bK();aV()});s(bt,"paste",aV);s(bt,"cut",av(function(){if(!cd.readOnly){bA("")}}));if(n){s(bX,"mouseup",function(){if(document.activeElement==bt){bt.blur()}bK()})}var cL;try{cL=(document.activeElement==bt)}catch(cl){}if(cL||cd.autofocus){setTimeout(da,20)}else{aJ()}function bz(dg){return dg>=0&&dg<cN.size}var cm=aI.CodeMirror={getValue:ce,setValue:av(a1),getSelection:cf,replaceSelection:av(bA),focus:function(){window.focus();bK();da();aV()},setOption:function(dh,di){var dg=cd[dh];cd[dh]=di;if(dh=="mode"||dh=="indentUnit"){b5()}else{if(dh=="readOnly"&&di=="nocursor"){aJ();bt.blur()}else{if(dh=="readOnly"&&!di){cR(true)}else{if(dh=="theme"){cS()}else{if(dh=="lineWrapping"&&dg!=di){av(cW)()}else{if(dh=="tabSize"){cq(true)}else{if(dh=="keyMap"){cK()}}}}}}}if(dh=="lineNumbers"||dh=="gutter"||dh=="firstLineNumber"||dh=="theme"){bl();cq(true)}},getOption:function(dg){return cd[dg]},undo:av(c9),redo:av(cZ),indentLine:av(function(dh,dg){if(typeof dg!="string"){if(dg==null){dg=cd.smartIndent?"smart":"prev"}else{dg=dg?"add":"subtract"}}if(bz(dh)){bJ(dh,dg)}}),indentSelection:av(cQ),historySize:function(){return{undo:bf.done.length,redo:bf.undone.length}},clearHistory:function(){bf=new l()},matchBrackets:av(function(){cr(true)}),getTokenAt:av(function(dg){dg=aY(dg);return cV(dg.line).getTokenAt(co,cI(dg.line),dg.ch)}),getStateAfter:function(dg){dg=cb(dg==null?cN.size-1:dg);return cI(dg+1)},cursorCoords:function(dh,dg){if(dh==null){dh=dd.inverted}return this.charCoords(dh?dd.from:dd.to,dg)},charCoords:function(dh,dg){dh=aY(dh);if(dg=="local"){return c7(dh,false)}if(dg=="div"){return c7(dh,true)}return ar(dh)},coordsChar:function(dg){var dh=an(bC);return bR(dg.x-dh.left,dg.y-dh.top)},markText:av(bP),setBookmark:aZ,findMarksAt:bv,setMarker:av(b7),clearMarker:av(ay),setLineClass:av(bs),hideLine:av(function(dg){return c0(dg,true)}),showLine:av(function(dg){return c0(dg,false)}),onDeleteLine:function(dg,dh){if(typeof dg=="number"){if(!bz(dg)){return null}dg=cV(dg)}(dg.handlers||(dg.handlers=[])).push(dh);return dg},lineInfo:a0,addWidget:function(dk,di,dm,dj,dp){dk=c7(aY(dk));var dl=dk.yBot,dh=dk.x;di.style.position="absolute";bX.appendChild(di);if(dj=="over"){dl=dk.y}else{if(dj=="near"){var dg=Math.max(br.offsetHeight,cN.height*b0()),dn=Math.max(bX.clientWidth,bC.clientWidth)-bb();if(dk.yBot+di.offsetHeight>dg&&dk.y>di.offsetHeight){dl=dk.y-di.offsetHeight}if(dh+di.offsetWidth>dn){dh=dn-di.offsetWidth}}}di.style.top=(dl+cF())+"px";di.style.left=di.style.right="";if(dp=="right"){dh=bX.clientWidth-di.offsetWidth;di.style.right="0px"}else{if(dp=="left"){dh=0}else{if(dp=="middle"){dh=(bX.clientWidth-di.offsetWidth)/2}}di.style.left=(dh+bb())+"px"}if(dm){aF(dh,dl,dh+di.offsetWidth,dl+di.offsetHeight)}},lineCount:function(){return cN.size},clipPos:aY,getCursor:function(dg){if(dg==null){dg=dd.inverted}return ad(dg?dd.from:dd.to)},somethingSelected:function(){return !ag(dd.from,dd.to)},setCursor:av(function(dg,di,dh){if(di==null&&typeof dg.line=="number"){bd(dg.line,dg.ch,dh)}else{bd(dg,di,dh)}}),setSelection:av(function(di,dh,dg){(dg?bH:bF)(aY(di),aY(dh||di))}),getLine:function(dg){if(bz(dg)){return cV(dg).text}},getLineHandle:function(dg){if(bz(dg)){return cV(dg)}},setLine:av(function(dg,dh){if(bz(dg)){b1(dh,{line:dg,ch:0},{line:dg,ch:cV(dg).text.length})}}),removeLine:av(function(dg){if(bz(dg)){b1("",{line:dg,ch:0},aY({line:dg+1,ch:0}))}}),replaceRange:av(b1),getRange:function(dh,dg){return c4(aY(dh),aY(dg))},triggerOnKeyDown:av(cp),execCommand:function(dg){return O[dg](cm)},moveH:av(cU),deleteH:av(cA),moveV:av(cM),toggleOverwrite:function(){if(cB){cB=false;bj.className=bj.className.replace(" CodeMirror-overwrite","")}else{cB=true;bj.className+=" CodeMirror-overwrite"}},posFromIndex:function(dh){var di=0,dg;cN.iter(0,cN.size,function(dj){var dk=dj.text.length+1;if(dk>dh){dg=dh;return true}dh-=dk;++di});return aY({line:di,ch:dg})},indexFromPos:function(dh){if(dh.line<0||dh.ch<0){return 0}var dg=dh.ch;cN.iter(0,dh.line,function(di){dg+=di.text.length+1});return dg},scrollTo:function(dg,dh){if(dg!=null){br.scrollLeft=dg}if(dh!=null){aQ.scrollTop=dh}cq([])},getScrollInfo:function(){return{x:br.scrollLeft,y:aQ.scrollTop,height:aQ.scrollHeight,width:br.scrollWidth}},operation:function(dg){return av(dg)()},compoundChange:function(dg){return bZ(dg)},refresh:function(){cq(true);if(aQ.scrollHeight>bE){aQ.scrollTop=bE}},getInputField:function(){return bt},getWrapperElement:function(){return aI},getScrollerElement:function(){return br},getGutterElement:function(){return aL}};function cV(dg){return E(cN,dg)}function a9(dh,dg){aX=true;var di=dg-dh.height;for(var dj=dh;dj;dj=dj.parent){dj.height+=di}}function a1(dg){var dh={line:0,ch:0};aT(dh,{line:cN.size-1,ch:cV(cN.size-1).text.length},B(dg),dh,dh);cD=true}function ce(){var dg=[];cN.iter(0,cN.size,function(dh){dg.push(dh.text)});return dg.join("\n")}function bV(dg){if(bE!=aQ.scrollTop||cg!=br.scrollLeft){bE=aQ.scrollTop;cg=br.scrollLeft;cq([]);if(cd.fixedGutter){aL.style.left=br.scrollLeft+"px"}if(cd.onScroll){cd.onScroll(cm)}}}function cx(dq){ba(z(dq,"shiftKey"));for(var dk=k(dq);dk!=aI;dk=dk.parentNode){if(dk.parentNode==bX&&dk!=ct){return}}for(var dk=k(dq);dk!=aI;dk=dk.parentNode){if(dk.parentNode==a3){if(cd.onGutterClick){cd.onGutterClick(cm,r(a3.childNodes,dk)+c6,dq)}return W(dq)}}var dg=a8(dq);switch(y(dq)){case 3:if(Q&&!P){a7(dq)}return;case 2:if(dg){bd(dg.line,dg.ch,true)}setTimeout(bK,20);W(dq);return}if(!dg){if(k(dq)==br){W(dq)}return}if(!cw){da()}var dh=+new Date;if(a5&&a5.time>dh-400&&ag(a5.pos,dg)){W(dq);setTimeout(bK,20);return aO(dg.line)}else{if(by&&by.time>dh-400&&ag(by.pos,dg)){a5={time:dh,pos:dg};W(dq);return bS(dg)}else{by={time:dh,pos:dg}}}var ds=dg,di;if(cd.dragDrop&&H&&!cd.readOnly&&!ag(dd.from,dd.to)&&!ac(dg,dd.from)&&!ac(dd.to,dg)){if(g){br.draggable=true}function dl(dt){if(g){br.draggable=false}bi=false;dp();dj();if(Math.abs(dq.clientX-dt.clientX)+Math.abs(dq.clientY-dt.clientY)<10){W(dt);bd(dg.line,dg.ch,true);bK()}}var dp=s(document,"mouseup",av(dl),true);var dj=s(br,"drop",av(dl),true);bi=true;if(br.dragDrop){br.dragDrop()}return}W(dq);bd(dg.line,dg.ch,true);function dr(dt){var dv=a8(dt,true);if(dv&&!ag(dv,ds)){if(!cw){da()}ds=dv;bH(dg,dv);cD=false;var du=bL();if(dv.line>=du.to||dv.line<du.from){di=setTimeout(av(function(){dr(dt)}),150)}}}function dn(dt){clearTimeout(di);var du=a8(dt);if(du){bH(dg,du)}W(dt);bK();cD=true;dm();dp()}var dm=s(document,"mousemove",av(function(dt){clearTimeout(di);W(dt);if(!K&&!y(dt)){dn(dt)}else{dr(dt)}}),true);var dp=s(document,"mouseup",av(dn),true)}function b8(dg){for(var di=k(dg);di!=aI;di=di.parentNode){if(di.parentNode==a3){return W(dg)}}var dh=a8(dg);if(!dh){return}a5={time:+new Date,pos:dh};W(dg);bS(dh)}function aq(dk){if(cd.onDragEvent&&cd.onDragEvent(cm,R(dk))){return}dk.preventDefault();var dn=a8(dk,true),dh=dk.dataTransfer.files;if(!dn||cd.readOnly){return}if(dh&&dh.length&&window.FileReader&&window.File){function dj(dr,dq){var dp=new FileReader;dp.onload=function(){dl[dq]=dp.result;if(++di==dm){dn=aY(dn);av(function(){var ds=b1(dl.join(""),dn,dn);bH(dn,ds)})()}};dp.readAsText(dr)}var dm=dh.length,dl=Array(dm),di=0;for(var dg=0;dg<dm;++dg){dj(dh[dg],dg)}}else{if(bi&&!(ac(dn,dd.from)||ac(dd.to,dn))){return}try{var dl=dk.dataTransfer.getData("Text");if(dl){bZ(function(){var dq=dd.from,dp=dd.to;bH(dn,dn);if(bi){b1("",dq,dp)}bA(dl);bK()})}}catch(dk){}}}function aM(di){var dg=cf();di.dataTransfer.setData("Text",dg);if(Q||ai||N){var dh=document.createElement("img");dh.scr="data:image/gif;base64,R0lGODdhAgACAIAAAAAAAP///ywAAAAAAgACAAACAoRRADs=";di.dataTransfer.setDragImage(dh,0,0)}}function bp(di,dg){if(typeof di=="string"){di=O[di];if(!di){return false}}var dh=cv;try{if(cd.readOnly){cG=true}if(dg){cv=null}di(cm)}catch(dj){if(dj!=ae){throw dj}return false}finally{cv=dh;cG=false}return true}function c1(dm){var dg=c(cd.keyMap),dj=dg.auto;clearTimeout(bM);if(dj&&!T(dm)){bM=setTimeout(function(){if(c(cd.keyMap)==dg){cd.keyMap=(dj.call?dj.call(null,cm):dj)}},50)}var dh=U[z(dm,"keyCode")],dl=false;if(dh==null||dm.altGraphKey){return false}if(z(dm,"altKey")){dh="Alt-"+dh}if(z(dm,"ctrlKey")){dh="Ctrl-"+dh}if(z(dm,"metaKey")){dh="Cmd-"+dh}var dk=false;function di(){dk=true}if(z(dm,"shiftKey")){dl=m("Shift-"+dh,cd.extraKeys,cd.keyMap,function(dn){return bp(dn,true)},di)||m(dh,cd.extraKeys,cd.keyMap,function(dn){if(typeof dn=="string"&&/^go[A-Z]/.test(dn)){return bp(dn)}},di)}else{dl=m(dh,cd.extraKeys,cd.keyMap,bp,di)}if(dk){dl=false}if(dl){W(dm);c2();if(K){dm.oldKeyCode=dm.keyCode;dm.keyCode=0}}return dl}function ca(di,dg){var dh=m("'"+dg+"'",cd.extraKeys,cd.keyMap,function(dj){return bp(dj,true)});if(dh){W(di);c2()}return dh}var cY=null,bM;function cp(di){if(!cw){da()}if(K&&di.keyCode==27){di.returnValue=false}if(bB){if(bU()){bB=false}}if(cd.onKeyEvent&&cd.onKeyEvent(cm,R(di))){return}var dg=z(di,"keyCode");ba(dg==16||z(di,"shiftKey"));var dh=c1(di);if(N){cY=dh?dg:null;if(!dh&&dg==88&&z(di,P?"metaKey":"ctrlKey")){bA("")}}}function bu(dj){if(bB){bU()}if(cd.onKeyEvent&&cd.onKeyEvent(cm,R(dj))){return}var di=z(dj,"keyCode"),dg=z(dj,"charCode");if(N&&di==cY){cY=null;W(dj);return}if(((N&&(!dj.which||dj.which<10))||n)&&c1(dj)){return}var dh=String.fromCharCode(dg==null?di:dg);if(cd.electricChars&&co.electricChars&&cd.smartIndent&&!cd.readOnly){if(co.electricChars.indexOf(dh)>-1){setTimeout(av(function(){bJ(dd.to.line,"smart")}),75)}}if(ca(dj,dh)){return}aV()}function cy(dg){if(cd.onKeyEvent&&cd.onKeyEvent(cm,R(dg))){return}if(z(dg,"keyCode")==16){cv=null}}function da(){if(cd.readOnly=="nocursor"){return}if(!cw){if(cd.onFocus){cd.onFocus(cm)}cw=true;if(br.className.search(/\bCodeMirror-focused\b/)==-1){br.className+=" CodeMirror-focused"}if(!bm){cR(true)}}ap();c2()}function aJ(){if(cw){if(cd.onBlur){cd.onBlur(cm)}cw=false;if(ci){av(function(){if(ci){ci();ci=null}})()}br.className=br.className.replace(" CodeMirror-focused","")}clearInterval(c5);setTimeout(function(){if(!cw){cv=null}},150)}function db(dg){if(dg>0&&dg<1){return 1}else{if(dg>-1&&dg<0){return -1}else{return Math.round(dg)}}}function aA(dj){var dh=0,dg=0;if(dj.type=="DOMMouseScroll"){var dk=-dj.detail*8;if(dj.axis==dj.HORIZONTAL_AXIS){dh=dk}else{if(dj.axis==dj.VERTICAL_AXIS){dg=dk}}}else{if(dj.wheelDeltaX!==undefined&&dj.wheelDeltaY!==undefined){dh=dj.wheelDeltaX/3;dg=dj.wheelDeltaY/3}else{if(dj.wheelDelta!==undefined){dg=dj.wheelDelta/3}}}var di=false;dh=db(dh);dg=db(dg);if((dh>0&&br.scrollLeft>0)||(dh<0&&br.scrollLeft+br.clientWidth<br.scrollWidth)){br.scrollLeft-=dh;di=true}if((dg>0&&aQ.scrollTop>0)||(dg<0&&aQ.scrollTop+aQ.clientHeight<aQ.scrollHeight)){aQ.scrollTop-=dg;di=true}if(di){x(dj)}}function aT(dl,dk,dj,dh,dg){if(cG){return}if(bf){var di=[];cN.iter(dl.line,dk.line+1,function(dm){di.push(dm.text)});bf.addChange(dl.line,dj.length,di);while(bf.done.length>cd.undoDepth){bf.done.shift()}}aw(dl,dk,dj,dh,dg)}function cn(dl,dm){if(!dl.length){return}var dn=dl.pop(),dh=[];for(var di=dn.length-1;di>=0;di-=1){var dk=dn[di];var dp=[],dg=dk.start+dk.added;cN.iter(dk.start,dg,function(dq){dp.push(dq.text)});dh.push({start:dk.start,added:dk.old.length,old:dp});var dj={line:dk.start+dk.old.length-1,ch:Z(dp[dp.length-1],dk.old[dk.old.length-1])};aw({line:dk.start,ch:0},{line:dg-1,ch:cV(dg-1).text.length},dk.old,dj,dj)}cD=true;dm.push(dh)}function c9(){cn(bf.done,bf.undone)}function cZ(){cn(bf.undone,bf.done)}function aw(dw,dk,dC,dg,dD){if(cG){return}var dB=false,dj=bO.length;if(!cd.lineWrapping){cN.iter(dw.line,dk.line+1,function(dE){if(!dE.hidden&&dE.text.length==dj){dB=true;return true}})}if(dw.line!=dk.line||dC.length>1){aX=true}var dt=dk.line-dw.line,ds=cV(dw.line),dh=cV(dk.line);if(dw.ch==0&&dk.ch==0&&dC[dC.length-1]==""){var dq=[],dr=null;if(dw.line){dr=cV(dw.line-1);dr.fixMarkEnds(dh)}else{dh.fixMarkStarts()}for(var dy=0,dA=dC.length-1;dy<dA;++dy){dq.push(e.inheritMarks(dC[dy],dr))}if(dt){cN.remove(dw.line,dt,cP)}if(dq.length){cN.insert(dw.line,dq)}}else{if(ds==dh){if(dC.length==1){ds.replace(dw.ch,dk.ch,dC[0])}else{dh=ds.split(dk.ch,dC[dC.length-1]);ds.replace(dw.ch,null,dC[0]);ds.fixMarkEnds(dh);var dq=[];for(var dy=1,dA=dC.length-1;dy<dA;++dy){dq.push(e.inheritMarks(dC[dy],ds))}dq.push(dh);cN.insert(dw.line+1,dq)}}else{if(dC.length==1){ds.replace(dw.ch,null,dC[0]);dh.replace(null,dk.ch,"");ds.append(dh);cN.remove(dw.line+1,dt,cP)}else{var dq=[];ds.replace(dw.ch,null,dC[0]);dh.replace(null,dk.ch,dC[dC.length-1]);ds.fixMarkEnds(dh);for(var dy=1,dA=dC.length-1;dy<dA;++dy){dq.push(e.inheritMarks(dC[dy],ds))}if(dt>1){cN.remove(dw.line+1,dt-1,cP)}cN.insert(dw.line+1,dq)}}}if(cd.lineWrapping){var dm=Math.max(5,br.clientWidth/bo()-3);cN.iter(dw.line,dw.line+dC.length,function(dE){if(dE.hidden){return}var dF=Math.ceil(dE.text.length/dm)||1;if(dF!=dE.height){a9(dE,dF)}})}else{cN.iter(dw.line,dw.line+dC.length,function(dF){var dE=dF.text;if(!dF.hidden&&dE.length>dj){bO=dE;dj=dE.length;bx=true;dB=false}});if(dB){cT=true}}var di=[],dp=dC.length-dt-1;for(var dy=0,dv=cu.length;dy<dv;++dy){var dz=cu[dy];if(dz<dw.line){di.push(dz)}else{if(dz>dk.line){di.push(dz+dp)}}}var dx=dw.line+Math.min(dC.length,500);cX(dw.line,dx);di.push(dx);cu=di;bQ(100);aG.push({from:dw.line,to:dk.line+1,diff:dp});var dn={from:dw,to:dk,text:dC};if(c3){for(var dl=c3;dl.next;dl=dl.next){}dl.next=dn}else{c3=dn}function du(dE){return dE<=Math.min(dk.line,dk.line+dp)?dE:dE+dp}bF(aY(dg),aY(dD),du(dd.from.line),du(dd.to.line))}function ax(di){var dg=b0(),dh=Math.floor(cN.height*dg+2*cF()),dj=br.clientHeight;aQ.style.height=dj+"px";if(br.clientHeight){cz.style.height=dh+"px"}if(di!=null){aQ.scrollTop=di}ct.style.top=(bk*dg-aQ.scrollTop)+"px";aQ.style.display=(dh>dj)?"block":"none"}function bI(){var di=document.createElement("div"),dh=document.createElement("div");di.className="CodeMirror-scrollbar";di.style.cssText="position: absolute; left: -9999px; height: 100px;";dh.className="CodeMirror-scrollbar-inner";dh.style.height="200px";di.appendChild(dh);document.body.appendChild(di);var dg=(di.offsetWidth<=1);document.body.removeChild(di);return dg}function bG(){var dg=0;bO="";bx=true;cN.iter(0,cN.size,function(di){var dh=di.text;if(!di.hidden&&dh.length>dg){dg=dh.length;bO=dh}});cT=false}function b1(dh,dk,dj){dk=aY(dk);if(!dj){dj=dk}else{dj=aY(dj)}dh=B(dh);function di(dn){if(ac(dn,dk)){return dn}if(!ac(dj,dn)){return dg}var dl=dn.line+dh.length-(dj.line-dk.line)-1;var dm=dn.ch;if(dn.line==dj.line){dm+=dh[dh.length-1].length-(dj.ch-(dj.line==dk.line?dk.ch:0))}return{line:dl,ch:dm}}var dg;aH(dh,dk,dj,function(dl){dg=dl;return{from:di(dd.from),to:di(dd.to)}});return dg}function bA(dg,dh){aH(B(dg),dd.from,dd.to,function(di){if(dh=="end"){return{from:di,to:di}}else{if(dh=="start"){return{from:dd.from,to:dd.from}}else{return{from:dd.from,to:di}}}})}function aH(dj,dl,dk,dg){var di=dj.length==1?dj[0].length+dl.ch:dj[dj.length-1].length;var dh=dg({line:dl.line+dj.length-1,ch:di});aT(dl,dk,dj,dh.from,dh.to)}function c4(dk,dj){var dh=dk.line,dg=dj.line;if(dh==dg){return cV(dh).text.slice(dk.ch,dj.ch)}var di=[cV(dh).text.slice(dk.ch)];cN.iter(dh+1,dg,function(dl){di.push(dl.text)});di.push(cV(dg).text.slice(0,dj.ch));return di.join("\n")}function cf(){return c4(dd.from,dd.to)}var bB=false;function ap(){if(bB){return}ck.set(cd.pollInterval,function(){aS();bU();if(cw){ap()}aD()})}function aV(){var dg=false;bB=true;function dh(){aS();var di=bU();if(!di&&!dg){dg=true;ck.set(60,dh)}else{bB=false;ap()}aD()}ck.set(20,dh)}var bh="";function bU(){if(bm||!cw||ah(bt)||cd.readOnly){return false}var dh=bt.value;if(dh==bh){return false}cv=null;var di=0,dg=Math.min(bh.length,dh.length);while(di<dg&&bh[di]==dh[di]){++di}if(di<bh.length){dd.from={line:dd.from.line,ch:dd.from.ch-(bh.length-di)}}else{if(cB&&ag(dd.from,dd.to)){dd.to={line:dd.to.line,ch:Math.min(cV(dd.to.line).text.length,dd.to.ch+(dh.length-di))}}}bA(dh.slice(di),"end");if(dh.length>1000){bt.value=bh=""}else{bh=dh}return true}function cR(dg){if(!ag(dd.from,dd.to)){bh="";bt.value=cf();a(bt)}else{if(dg){bh=bt.value=""}}}function bK(){if(cd.readOnly!="nocursor"){bt.focus()}}function df(){if(!bj.getBoundingClientRect){return}var dg=bj.getBoundingClientRect();if(K&&dg.top==dg.bottom){return}var dh=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);if(dg.top<0||dg.bottom>dh){cs()}}function cs(){var dg=b2();return aF(dg.x,dg.y,dg.x,dg.yBot)}function b2(){var dh=c7(dd.inverted?dd.from:dd.to);var dg=cd.lineWrapping?Math.min(dh.x,bC.offsetWidth):dh.x;return{x:dg,y:dh.y,yBot:dh.yBot}}function aF(di,dk,dg,dj){var dl=a4(di,dk,dg,dj),dh=false;if(dl.scrollLeft!=null){br.scrollLeft=dl.scrollLeft;dh=true}if(dl.scrollTop!=null){aQ.scrollTop=dl.scrollTop;dh=true}if(dh&&cd.onScroll){cd.onScroll(cm)}}function a4(di,dp,dh,dn){var dl=bb(),du=cF();dp+=du;dn+=du;di+=dl;dh+=dl;var dr=br.clientHeight,dj=aQ.scrollTop,dt={};var dg=dp<cF()+10;if(dp<dj){dt.scrollTop=dg?0:Math.max(0,dp)}else{if(dn>dj+dr){dt.scrollTop=dn-dr}}var dq=br.clientWidth,ds=br.scrollLeft;var dm=cd.fixedGutter?aL.clientWidth:0;var dk=di<dm+dl+10;if(di<ds+dm||dk){if(dk){di=0}dt.scrollLeft=Math.max(0,di-10-dm)}else{if(dh>dq+ds-3){dt.scrollLeft=dh+10-dq}}return dt}function bL(dk){var dg=b0(),dj=(dk!=null?dk:aQ.scrollTop)-cF();var di=Math.max(0,Math.floor(dj/dg));var dh=Math.ceil((dj+br.clientHeight)/dg);return{from:aa(cN,di),to:aa(cN,dh)}}function cq(dr,dm,dk){if(!br.clientWidth){c6=bW=bk=0;return}var dl=bL(dk);if(dr!==true&&dr.length==0&&dl.from>c6&&dl.to<bW){ax(dk);return}var ds=Math.max(dl.from-100,0),dt=Math.min(cN.size,dl.to+100);if(c6<ds&&ds-c6<20){ds=c6}if(bW>dt&&bW-dt<20){dt=Math.min(cN.size,bW)}var dw=dr===true?[]:cc([{from:c6,to:bW,domStart:0}],dr);var dq=0;for(var dn=0;dn<dw.length;++dn){var dp=dw[dn];if(dp.from<ds){dp.domStart+=(ds-dp.from);dp.from=ds}if(dp.to>dt){dp.to=dt}if(dp.from>=dp.to){dw.splice(dn--,1)}else{dq+=dp.to-dp.from}}if(dq==dt-ds&&ds==c6&&dt==bW){ax(dk);return}dw.sort(function(dy,dx){return dy.domStart-dx.domStart});var dj=b0(),dg=aL.style.display;au.style.display="none";aW(ds,dt,dw);au.style.display=aL.style.display="";var di=ds!=c6||dt!=bW||bY!=br.clientHeight+dj;if(di){bY=br.clientHeight+dj}c6=ds;bW=dt;bk=h(cN,ds);if(au.childNodes.length!=bW-c6){throw new Error("BAD PATCH! "+JSON.stringify(dw)+" size="+(bW-c6)+" nodes="+au.childNodes.length)}function du(){var dy=au.firstChild,dx=false;cN.iter(c6,bW,function(dA){if(!dA.hidden){var dz=Math.round(dy.offsetHeight/dj)||1;if(dA.height!=dz){a9(dA,dz);aX=dx=true}}dy=dy.nextSibling});return dx}if(cd.lineWrapping){var dv=Math.floor(cN.height*dj+2*cF()),dh=br.clientHeight;if(dv>dh){aQ.style.display="block"}du()}aL.style.display=dg;if(di||aX){aP()&&cd.lineWrapping&&du()&&aP()}dc();ax(dk);if(!dm&&cd.onUpdate){cd.onUpdate(cm)}return true}function cc(dq,dn){for(var dk=0,di=dn.length||0;dk<di;++dk){var dm=dn[dk],dg=[],dp=dm.diff||0;for(var dj=0,dh=dq.length;dj<dh;++dj){var dl=dq[dj];if(dm.to<=dl.from&&dm.diff){dg.push({from:dl.from+dp,to:dl.to+dp,domStart:dl.domStart})}else{if(dm.to<=dl.from||dm.from>=dl.to){dg.push(dl)}else{if(dm.from>dl.from){dg.push({from:dl.from,to:dm.from,domStart:dl.domStart})}if(dm.to<dl.to){dg.push({from:dm.to+dp,to:dl.to+dp,domStart:dl.domStart+(dm.to-dl.from)})}}}}dq=dg}return dq}function aW(dq,dr,dt){if(!dt.length){au.innerHTML=""}else{function dg(dv){var du=dv.nextSibling;dv.parentNode.removeChild(dv);return du}var dk=0,di=au.firstChild,dh;for(var dl=0;dl<dt.length;++dl){var ds=dt[dl];while(ds.domStart>dk){di=dg(di);dk++}for(var dj=0,dn=ds.to-ds.from;dj<dn;++dj){di=di.nextSibling;dk++}}while(di){di=dg(di)}}var dm=dt.shift(),di=au.firstChild,dj=dq;var dp=document.createElement("div");cN.iter(dq,dr,function(du){if(dm&&dm.to==dj){dm=dt.shift()}if(!dm||dm.from>dj){if(du.hidden){var dv=dp.innerHTML="<pre></pre>"}else{var dv="<pre"+(du.className?' class="'+du.className+'"':"")+">"+du.getHTML(bg)+"</pre>";if(du.bgClassName){dv='<div style="position: relative"><pre class="'+du.bgClassName+'" style="position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2">&#160;</pre>'+dv+"</div>"}}dp.innerHTML=dv;au.insertBefore(dp.firstChild,di)}else{di=di.nextSibling}++dj})}function aP(){if(!cd.gutter&&!cd.lineNumbers){return}var dh=ct.offsetHeight,dq=br.clientHeight;aL.style.height=(dh-dq<2?dq:dh)+"px";var dn=[],dl=c6,dp;cN.iter(c6,Math.max(bW,c6+1),function(ds){if(ds.hidden){dn.push("<pre></pre>")}else{var dr=ds.gutterMarker;var du=cd.lineNumbers?dl+cd.firstLineNumber:null;if(dr&&dr.text){du=dr.text.replace("%N%",du!=null?du:"")}else{if(du==null){du="\u00a0"}}dn.push((dr&&dr.style?'<pre class="'+dr.style+'">':"<pre>"),du);for(var dt=1;dt<ds.height;++dt){dn.push("<br/>&#160;")}dn.push("</pre>");if(!dr){dp=dl}}++dl});aL.style.display="none";a3.innerHTML=dn.join("");if(dp!=null&&cd.lineNumbers){var dj=a3.childNodes[dp-c6];var dk=String(cN.size).length,dg=J(dj.firstChild),di="";while(dg.length+di.length<dk){di+="\u00a0"}if(di){dj.insertBefore(document.createTextNode(di),dj.firstChild)}}aL.style.display="";var dm=Math.abs((parseInt(bC.style.marginLeft)||0)-aL.offsetWidth)>2;bC.style.marginLeft=aL.offsetWidth+"px";aX=false;return dm}function dc(){var dj=ag(dd.from,dd.to);var dv=c7(dd.from,true);var dq=dj?dv:c7(dd.to,true);var dn=dd.inverted?dv:dq,dh=b0();var dg=an(aI),di=an(au);b9.style.top=Math.max(0,Math.min(br.offsetHeight,dn.y+di.top-dg.top))+"px";b9.style.left=Math.max(0,Math.min(br.offsetWidth,dn.x+di.left-dg.left))+"px";if(dj){bj.style.top=dn.y+"px";bj.style.left=(cd.lineWrapping?Math.min(dn.x,bC.offsetWidth):dn.x)+"px";bj.style.display="";bn.style.display="none"}else{var dt=dv.y==dq.y,dl="";var dr=bC.clientWidth||bC.offsetWidth;var dm=bC.clientHeight||bC.offsetHeight;function du(dA,dz,dy,dw){var dx=G?"width: "+(!dy?dr:dr-dy-dA)+"px":"right: "+dy+"px";dl+='<div class="CodeMirror-selected" style="position: absolute; left: '+dA+"px; top: "+dz+"px; "+dx+"; height: "+dw+'px"></div>'}if(dd.from.ch&&dv.y>=0){var ds=dt?dr-dq.x:0;du(dv.x,dv.y,ds,dh)}var dk=Math.max(0,dv.y+(dd.from.ch?dh:0));var dp=Math.min(dq.y,dm)-dk;if(dp>0.2*dh){du(0,dk,0,dp)}if((!dt||!dd.from.ch)&&dq.y<dm-0.5*dh){du(0,dq.y,dr-dq.x,dh)}bn.innerHTML=dl;bj.style.display="none";bn.style.display=""}}function ba(dg){if(dg){cv=cv||(dd.inverted?dd.to:dd.from)}else{cv=null}}function bH(di,dh){var dg=cv&&aY(cv);if(dg){if(ac(dg,di)){di=dg}else{if(ac(dh,dg)){dh=dg}}}bF(di,dh);cj=true}function bF(dn,dm,dg,dl){cJ=null;if(dg==null){dg=dd.from.line;dl=dd.to.line}if(ag(dd.from,dn)&&ag(dd.to,dm)){return}if(ac(dm,dn)){var dj=dm;dm=dn;dn=dj}if(dn.line!=dg){var dk=b3(dn,dg,dd.from.ch);if(!dk){c0(dn.line,false)}else{dn=dk}}if(dm.line!=dl){dm=b3(dm,dl,dd.to.ch)}if(ag(dn,dm)){dd.inverted=false}else{if(ag(dn,dd.to)){dd.inverted=false}else{if(ag(dm,dd.from)){dd.inverted=true}}}if(cd.autoClearEmptyLines&&ag(dd.from,dd.to)){var di=dd.inverted?dn:dm;if(di.line!=dd.from.line&&dd.from.line<cN.size){var dh=cV(dd.from.line);if(/^\s+$/.test(dh.text)){setTimeout(av(function(){if(dh.parent&&/^\s+$/.test(dh.text)){var dp=ab(dh);b1("",{line:dp,ch:0},{line:dp,ch:dh.text.length})}},10))}}}dd.from=dn;dd.to=dm;aU=true}function b3(dl,dh,di){function dk(dp){var dr=dl.line+dp,dn=dp==1?cN.size:-1;while(dr!=dn){var dm=cV(dr);if(!dm.hidden){var dq=dl.ch;if(dj||dq>di||dq>dm.text.length){dq=dm.text.length}return{line:dr,ch:dq}}dr+=dp}}var dg=cV(dl.line);var dj=dl.ch==dg.text.length&&dl.ch!=di;if(!dg.hidden){return dl}if(dl.line>=dh){return dk(1)||dk(-1)}else{return dk(-1)||dk(1)}}function bd(dg,di,dh){var dj=aY({line:dg,ch:di||0});(dh?bH:bF)(dj,dj)}function cb(dg){return Math.max(0,Math.min(dg,cN.size-1))}function aY(di){if(di.line<0){return{line:0,ch:0}}if(di.line>=cN.size){return{line:cN.size-1,ch:cV(cN.size-1).text.length}}var dg=di.ch,dh=cV(di.line).text.length;if(dg==null||dg>dh){return{line:di.line,ch:dh}}else{if(dg<0){return{line:di.line,ch:0}}else{return di}}}function cC(dj,dn){var dk=dd.inverted?dd.from:dd.to,dp=dk.line,dg=dk.ch;var dm=cV(dp);function dh(){for(var dq=dp+dj,ds=dj<0?-1:cN.size;dq!=ds;dq+=dj){var dr=cV(dq);if(!dr.hidden){dp=dq;dm=dr;return true}}}function dl(dq){if(dg==(dj<0?0:dm.text.length)){if(!dq&&dh()){dg=dj<0?dm.text.length:0}else{return false}}else{dg+=dj}return true}if(dn=="char"){dl()}else{if(dn=="column"){dl(true)}else{if(dn=="word"){var di=false;for(;;){if(dj<0){if(!dl()){break}}if(aj(dm.text.charAt(dg))){di=true}else{if(di){if(dj<0){dj=1;dl()}break}}if(dj>0){if(!dl()){break}}}}}}return{line:dp,ch:dg}}function cU(dg,dh){var di=dg<0?dd.from:dd.to;if(cv||ag(dd.from,dd.to)){di=cC(dg,dh)}bd(di.line,di.ch,true)}function cA(dg,dh){if(!ag(dd.from,dd.to)){b1("",dd.from,dd.to)}else{if(dg<0){b1("",cC(dg,dh),dd.to)}else{b1("",dd.from,cC(dg,dh))}}cj=true}var cJ=null;function cM(dg,dh){var dj=0,dk=c7(dd.inverted?dd.from:dd.to,true);if(cJ!=null){dk.x=cJ}if(dh=="page"){dj=Math.min(br.clientHeight,window.innerHeight||document.documentElement.clientHeight)}else{if(dh=="line"){dj=b0()}}var di=bR(dk.x,dk.y+dj*dg+2);if(dh=="page"){aQ.scrollTop+=c7(di,true).y-dk.y}bd(di.line,di.ch,true);cJ=dk.x}function bS(dj){var dh=cV(dj.line).text;var di=dj.ch,dg=dj.ch;while(di>0&&aj(dh.charAt(di-1))){--di}while(dg<dh.length&&aj(dh.charAt(dg))){++dg}bH({line:dj.line,ch:di},{line:dj.line,ch:dg})}function aO(dg){bH({line:dg,ch:0},aY({line:dg+1,ch:0}))}function cQ(di){if(ag(dd.from,dd.to)){return bJ(dd.from.line,di)}var dh=dd.to.line-(dd.to.ch?0:1);for(var dg=dd.from.line;dg<=dh;++dg){bJ(dg,di)}}function bJ(di,dq){if(!dq){dq="add"}if(dq=="smart"){if(!co.indent){dq="prev"}else{var dg=cI(di)}}var dr=cV(di),dk=dr.indentation(cd.tabSize),dh=dr.text.match(/^\s*/)[0],dm;if(dq=="smart"){dm=co.indent(dg,dr.text.slice(dh.length),dr.text);if(dm==ae){dq="prev"}}if(dq=="prev"){if(di){dm=cV(di-1).indentation(cd.tabSize)}else{dm=0}}else{if(dq=="add"){dm=dk+cd.indentUnit}else{if(dq=="subtract"){dm=dk-cd.indentUnit}}}dm=Math.max(0,dm);var dp=dm-dk;if(!dp){if(dd.from.line!=di&&dd.to.line!=di){return}var dn=dh}else{var dn="",dl=0;if(cd.indentWithTabs){for(var dj=Math.floor(dm/cd.tabSize);dj;--dj){dl+=cd.tabSize;dn+="\t"}}while(dl<dm){++dl;dn+=" "}}b1(dn,{line:di,ch:0},{line:di,ch:dh.length})}function b5(){co=v.getMode(cd,cd.mode);cN.iter(0,cN.size,function(dg){dg.stateAfter=null});cu=[0];bQ()}function bl(){var dg=cd.gutter||cd.lineNumbers;aL.style.display=dg?"":"none";if(dg){aX=true}else{au.parentNode.style.marginLeft=0}}function cW(di,dh){if(cd.lineWrapping){aI.className+=" CodeMirror-wrap";var dg=br.clientWidth/bo()-3;cN.iter(0,cN.size,function(dj){if(dj.hidden){return}var dk=Math.ceil(dj.text.length/dg)||1;if(dk!=1){a9(dj,dk)}});bC.style.width=bX.style.width="";bc.style.left=""}else{aI.className=aI.className.replace(" CodeMirror-wrap","");bO="";bx=true;cN.iter(0,cN.size,function(dj){if(dj.height!=1&&!dj.hidden){a9(dj,1)}if(dj.text.length>bO.length){bO=dj.text}})}aG.push({from:0,to:cN.size})}function bg(dh){var dg=cd.tabSize-dh%cd.tabSize,dj=at[dg];if(dj){return dj}for(var dk='<span class="cm-tab">',di=0;di<dg;++di){dk+=" "}return(at[dg]={html:dk+"</span>",width:dg})}function cS(){br.className=br.className.replace(/\s*cm-s-\S+/g,"")+cd.theme.replace(/(^|\s)\s*/g," cm-s-")}function cK(){var dg=w[cd.keyMap].style;aI.className=aI.className.replace(/\s*cm-keymap-\S+/g,"")+(dg?" cm-keymap-"+dg:"")}function de(){this.set=[]}de.prototype.clear=av(function(){var dl=Infinity,dh=-Infinity;for(var dk=0,dn=this.set.length;dk<dn;++dk){var di=this.set[dk],dg=di.marked;if(!dg||!di.parent){continue}var dm=ab(di);dl=Math.min(dl,dm);dh=Math.max(dh,dm);for(var dj=0;dj<dg.length;++dj){if(dg[dj].marker==this){dg.splice(dj--,1)}}}if(dl!=Infinity){aG.push({from:dl,to:dh+1})}});de.prototype.find=function(){var dl,dm;for(var di=0,dk=this.set.length;di<dk;++di){var dp=this.set[di],dj=dp.marked;for(var dh=0;dh<dj.length;++dh){var dg=dj[dh];if(dg.marker==this){if(dg.from!=null||dg.to!=null){var dn=ab(dp);if(dn!=null){if(dg.from!=null){dl={line:dn,ch:dg.from}}if(dg.to!=null){dm={line:dn,ch:dg.to}}}}}}}return{from:dl,to:dm}};function bP(dm,dl,di){dm=aY(dm);dl=aY(dl);var dg=new de();if(!ac(dm,dl)){return dg}function dk(dn,dr,dq,dp){cV(dn).addMark(new M(dr,dq,dp,dg))}if(dm.line==dl.line){dk(dm.line,dm.ch,dl.ch,di)}else{dk(dm.line,dm.ch,null,di);for(var dh=dm.line+1,dj=dl.line;dh<dj;++dh){dk(dh,null,null,di)}dk(dl.line,null,dl.ch,di)}aG.push({from:dm.line,to:dl.line+1});return dg}function aZ(dh){dh=aY(dh);var dg=new I(dh.ch);cV(dh.line).addMark(dg);return dg}function bv(dl){dl=aY(dl);var dk=[],di=cV(dl.line).marked;if(!di){return dk}for(var dh=0,dj=di.length;dh<dj;++dh){var dg=di[dh];if((dg.from==null||dg.from<=dl.ch)&&(dg.to==null||dg.to>=dl.ch)){dk.push(dg.marker||dg)}}return dk}function b7(dg,di,dh){if(typeof dg=="number"){dg=cV(cb(dg))}dg.gutterMarker={text:di,style:dh};aX=true;return dg}function ay(dg){if(typeof dg=="number"){dg=cV(cb(dg))}dg.gutterMarker=null;aX=true}function a2(dh,dj){var di=dh,dg=dh;if(typeof dh=="number"){dg=cV(cb(dh))}else{di=ab(dh)}if(di==null){return null}if(dj(dg,di)){aG.push({from:di,to:di+1})}else{return null}return dg}function bs(dh,dg,di){return a2(dh,function(dj){if(dj.className!=dg||dj.bgClassName!=di){dj.className=dg;dj.bgClassName=di;return true}})}function c0(dh,dg){return a2(dh,function(dj,dm){if(dj.hidden!=dg){dj.hidden=dg;if(!cd.lineWrapping){var di=dj.text;if(dg&&di.length==bO.length){cT=true}else{if(!dg&&di.length>bO.length){bO=di;maxWidth=null;cT=false}}}a9(dj,dg?0:1);var dl=dd.from.line,dk=dd.to.line;if(dg&&(dl==dm||dk==dm)){var dp=dl==dm?b3({line:dl,ch:0},dl,0):dd.from;var dn=dk==dm?b3({line:dk,ch:0},dk,0):dd.to;if(!dn){return}bF(dp,dn)}return(aX=true)}})}function a0(dh){if(typeof dh=="number"){if(!bz(dh)){return null}var di=dh;dh=cV(dh);if(!dh){return null}}else{var di=ab(dh);if(di==null){return null}}var dg=dh.gutterMarker;return{line:di,handle:dh,text:dh.text,markerText:dg&&dg.text,markerClass:dg&&dg.style,lineClass:dh.className,bgClass:dh.bgClassName}}function cH(dg){az.innerHTML="<pre><span>x</span></pre>";az.firstChild.firstChild.firstChild.nodeValue=dg;return az.firstChild.firstChild.offsetWidth||10}function aK(dt,dm){if(dm<=0){return 0}var dj=cV(dt),dq=dj.text;function dr(du){return ch(dj,du).left}var dn=0,dl=0,dp=dq.length,dk;var dh=Math.min(dp,Math.ceil(dm/bo()));for(;;){var di=dr(dh);if(di<=dm&&dh<dp){dh=Math.min(dp,Math.ceil(dh*1.2))}else{dk=di;dp=dh;break}}if(dm>dk){return dp}dh=Math.floor(dp*0.8);di=dr(dh);if(di<dm){dn=dh;dl=di}for(;;){if(dp-dn<=1){return(dk-dm>dm-dl)?dn:dp}var ds=Math.ceil((dn+dp)/2),dg=dr(ds);if(dg>dm){dp=ds;dk=dg}else{dn=ds;dl=dg}}}var cO="CodeMirror-temp-"+Math.floor(Math.random()*16777215).toString(16);function ch(dh,dk){if(dk==0){return{top:0,left:0}}var dg=cd.lineWrapping&&dk<dh.text.length&&p.test(dh.text.slice(dk-1,dk+1));az.innerHTML="<pre>"+dh.getHTML(bg,dk,cO,dg)+"</pre>";var dj=document.getElementById(cO);var dm=dj.offsetTop,dl=dj.offsetLeft;if(K&&dm==0&&dl==0){var di=document.createElement("span");di.innerHTML="x";dj.parentNode.insertBefore(di,dj.nextSibling);dm=di.offsetTop}return{top:dm,left:dl}}function c7(dl,dj){var dg,dh=b0(),dk=dh*(h(cN,dl.line)-(dj?bk:0));if(dl.ch==0){dg=0}else{var di=ch(cV(dl.line),dl.ch);dg=di.left;if(cd.lineWrapping){dk+=Math.max(0,di.top)}}return{x:dg,y:dk,yBot:dk+dh}}function bR(dq,dp){if(dp<0){dp=0}var dm=b0(),dk=bo(),dw=bk+Math.floor(dp/dm);var dr=aa(cN,dw);if(dr>=cN.size){return{line:cN.size-1,ch:cV(cN.size-1).text.length}}var dh=cV(dr),dt=dh.text;var dy=cd.lineWrapping,dn=dy?dw-h(cN,dr):0;if(dq<=0&&dn==0){return{line:dr,ch:0}}function dx(dA){var dB=ch(dh,dA);if(dy){var dC=Math.round(dB.top/dm);return Math.max(0,dB.left+(dC-dn)*br.clientWidth)}return dB.left}var dv=0,du=0,di=dt.length,dg;var ds=Math.min(di,Math.ceil((dq+dn*br.clientWidth*0.9)/dk));for(;;){var dl=dx(ds);if(dl<=dq&&ds<di){ds=Math.min(di,Math.ceil(ds*1.2))}else{dg=dl;di=ds;break}}if(dq>dg){return{line:dr,ch:di}}ds=Math.floor(di*0.8);dl=dx(ds);if(dl<dq){dv=ds;du=dl}for(;;){if(di-dv<=1){return{line:dr,ch:(dg-dq>dq-du)?dv:di}}var dz=Math.ceil((dv+di)/2),dj=dx(dz);if(dj>dq){di=dz;dg=dj}else{dv=dz;du=dj}}}function ar(di){var dg=c7(di,true),dh=an(bC);return{x:dh.left+dg.x,y:dh.top+dg.y,yBot:dh.top+dg.yBot}}var a6,aC,b6;function b0(){if(b6==null){b6="<pre>";for(var dh=0;dh<49;++dh){b6+="x<br/>"}b6+="x</pre>"}var dg=au.clientHeight;if(dg==aC){return a6}aC=dg;az.innerHTML=b6;a6=az.firstChild.offsetHeight/50||1;az.innerHTML="";return a6}var c8,bD=0;function bo(){if(br.clientWidth==bD){return c8}bD=br.clientWidth;return(c8=cH("x"))}function cF(){return bC.offsetTop}function bb(){return bC.offsetLeft}function a8(dk,dj){var di=an(br,true),dg,dl;try{dg=dk.clientX;dl=dk.clientY}catch(dk){return null}if(!dj&&(dg-di.left>br.clientWidth||dl-di.top>br.clientHeight)){return null}var dh=an(bC,true);return bR(dg-dh.left,dl-dh.top)}function a7(dh){var dm=a8(dh),dl=aQ.scrollTop;if(!dm||N){return}if(ag(dd.from,dd.to)||ac(dm,dd.from)||!ac(dm,dd.to)){av(bd)(dm.line,dm.ch)}var dk=bt.style.cssText;b9.style.position="absolute";bt.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(dh.clientY-5)+"px; left: "+(dh.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";bm=true;var dj=bt.value=cf();bK();a(bt);function dg(){var dn=B(bt.value).join("\n");if(dn!=dj&&!cd.readOnly){av(bA)(dn,"end")}b9.style.position="relative";bt.style.cssText=dk;if(C){aQ.scrollTop=dl}bm=false;cR(true);ap()}if(Q){x(dh);var di=s(window,"mouseup",function(){di();setTimeout(dg,20)},true)}else{setTimeout(dg,50)}}function c2(){clearInterval(c5);var dg=true;bj.style.visibility="";c5=setInterval(function(){bj.style.visibility=(dg=!dg)?"":"hidden"},650)}var bw={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function cr(dm){var dg=dd.inverted?dd.from:dd.to,dp=cV(dg.line),dh=dg.ch-1;var dl=(dh>=0&&bw[dp.text.charAt(dh)])||bw[dp.text.charAt(++dh)];if(!dl){return}var dq=dl.charAt(0),dn=dl.charAt(1)==">",dA=dn?1:-1,dv=dp.styles;for(var dB=dh+1,dx=0,dz=dv.length;dx<dz;dx+=2){if((dB-=dv[dx].length)<=0){var dy=dv[dx+1];break}}var dj=[dp.text.charAt(dh)],du=/[(){}[\]]/;function ds(dN,dI,dJ){if(!dN.text){return}var dM=dN.styles,dH=dn?0:dN.text.length-1,dK;for(var dE=dn?0:dM.length-2,dG=dn?dM.length:-2;dE!=dG;dE+=2*dA){var dL=dM[dE];if(dM[dE+1]!=dy){dH+=dA*dL.length;continue}for(var dD=dn?0:dL.length-1,dC=dn?dL.length:-1;dD!=dC;dD+=dA,dH+=dA){if(dH>=dI&&dH<dJ&&du.test(dK=dL.charAt(dD))){var dF=bw[dK];if(dF.charAt(1)==">"==dn){dj.push(dK)}else{if(dj.pop()!=dF.charAt(0)){return{pos:dH,match:false}}else{if(!dj.length){return{pos:dH,match:true}}}}}}}}for(var dx=dg.line,dz=dn?Math.min(dx+100,cN.size):Math.max(-1,dx-100);dx!=dz;dx+=dA){var dp=cV(dx),dk=dx==dg.line;var dr=ds(dp,dk&&dn?dh+1:0,dk&&!dn?dh:dp.text.length);if(dr){break}}if(!dr){dr={pos:null,match:false}}var dy=dr.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";var dw=bP({line:dg.line,ch:dh},{line:dg.line,ch:dh+1},dy),di=dr.pos!=null&&bP({line:dx,ch:dr.pos},{line:dx,ch:dr.pos+1},dy);var dt=av(function(){dw.clear();di&&di.clear()});if(dm){setTimeout(dt,800)}else{ci=dt}}function be(dm){var dl,di;for(var dh=dm,dj=dm-40;dh>dj;--dh){if(dh==0){return 0}var dg=cV(dh-1);if(dg.stateAfter){return dh}var dk=dg.indentation(cd.tabSize);if(di==null||dl>dk){di=dh-1;dl=dk}}return di}function cI(di){var dh=be(di),dg=dh&&cV(dh-1).stateAfter;if(!dg){dg=Y(co)}else{dg=q(co,dg)}cN.iter(dh,di,function(dj){dj.highlight(co,dg,cd.tabSize);dj.stateAfter=q(co,dg)});if(dh<di){aG.push({from:dh,to:di})}if(di<cN.size&&!cV(di).stateAfter){cu.push(di)}return dg}function cX(di,dg){var dh=cI(di);cN.iter(di,dg,function(dj){dj.highlight(co,dh,cd.tabSize);dj.stateAfter=q(co,dh)})}function b4(){var dm=+new Date+cd.workTime;var dq=cu.length;while(cu.length){if(!cV(c6).stateAfter){var dj=c6}else{var dj=cu.pop()}if(dj>=cN.size){continue}var dh=be(dj),dg=dh&&cV(dh-1).stateAfter;if(dg){dg=q(co,dg)}else{dg=Y(co)}var dl=0,di=co.compareStates,dp=false,dn=dh,dk=false;cN.iter(dn,cN.size,function(ds){var dt=ds.stateAfter;if(+new Date>dm){cu.push(dn);bQ(cd.workDelay);if(dp){aG.push({from:dj,to:dn+1})}return(dk=true)}var du=ds.highlight(co,dg,cd.tabSize);if(du){dp=true}ds.stateAfter=q(co,dg);var dr=null;if(di){var dv=dt&&di(dt,dg);if(dv!=ae){dr=!!dv}}if(dr==null){if(du!==false||!dt){dl=0}else{if(++dl>3&&(!co.indent||co.indent(dt,"")==co.indent(dg,""))){dr=true}}}if(dr){return true}++dn});if(dk){return}if(dp){aG.push({from:dj,to:dn+1})}}if(dq&&cd.onHighlightComplete){cd.onHighlightComplete(cm)}}function bQ(dg){if(!cu.length){return}aB.set(dg,av(b4))}function aS(){cD=cj=c3=null;aG=[];aU=false;cP=[]}function aD(){if(cT){bG()}if(bx&&!cd.lineWrapping){bc.style.left=cH(bO)+"px";bx=false}var dj,dg;if(aU){var dk=b2();dj=a4(dk.x,dk.y,dk.x,dk.yBot)}if(aG.length){dg=cq(aG,true,(dj?dj.scrollTop:null))}else{if(aU){dc()}if(aX){aP()}}if(dj){cs()}if(aU){df();c2()}if(cw&&!bm&&(cD===true||(cD!==false&&aU))){cR(cj)}if(aU&&cd.matchBrackets){setTimeout(av(function(){if(ci){ci();ci=null}if(ag(dd.from,dd.to)){cr(false)}}),20)}var dl=aU,dh=cP;if(c3&&cd.onChange&&cm){cd.onChange(cm,c3)}if(dl&&cd.onCursorActivity){cd.onCursorActivity(cm)}for(var di=0;di<dh.length;++di){dh[di](cm)}if(dg&&cd.onUpdate){cd.onUpdate(cm)}}var cE=0;function av(dg){return function(){if(!cE++){aS()}try{var dh=dg.apply(this,arguments)}finally{if(!--cE){aD()}}return dh}}function bZ(dg){bf.startCompound();try{return dg()}finally{bf.endCompound()}}for(var bT in af){if(af.propertyIsEnumerable(bT)&&!cm.propertyIsEnumerable(bT)){cm[bT]=af[bT]}}return cm}v.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:false,smartIndent:true,tabSize:4,keyMap:"default",extraKeys:null,electricChars:true,autoClearEmptyLines:false,onKeyEvent:null,onDragEvent:null,lineWrapping:false,lineNumbers:false,gutter:false,fixedGutter:false,firstLineNumber:1,readOnly:false,dragDrop:true,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:false,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null};var t=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var P=t||/Mac/.test(navigator.platform);var X=/Win/.test(navigator.platform);var am=v.modes={},V=v.mimeModes={};v.defineMode=function(ap,ar){if(!v.defaults.mode&&ap!="null"){v.defaults.mode=ap}if(arguments.length>2){ar.dependencies=[];for(var aq=2;aq<arguments.length;++aq){ar.dependencies.push(arguments[aq])}}am[ap]=ar};v.defineMIME=function(aq,ap){V[aq]=ap};v.resolveMode=function(ap){if(typeof ap=="string"&&V.hasOwnProperty(ap)){ap=V[ap]}else{if(typeof ap=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(ap)){return v.resolveMode("application/xml")}}if(typeof ap=="string"){return{name:ap}}else{return ap||{name:"null"}}};v.getMode=function(aq,ap){var ap=v.resolveMode(ap);var ar=am[ap.name];if(!ar){return v.getMode(aq,"text/plain")}return ar(aq,ap)};v.listModes=function(){var aq=[];for(var ap in am){if(am.propertyIsEnumerable(ap)){aq.push(ap)}}return aq};v.listMIMEs=function(){var aq=[];for(var ap in V){if(V.propertyIsEnumerable(ap)){aq.push({mime:ap,mode:V[ap]})}}return aq};var af=v.extensions={};v.defineExtension=function(ap,aq){af[ap]=aq};var O=v.commands={selectAll:function(ap){ap.setSelection({line:0,ch:0},{line:ap.lineCount()-1})},killLine:function(ap){var at=ap.getCursor(true),ar=ap.getCursor(false),aq=!ag(at,ar);if(!aq&&ap.getLine(at.line).length==at.ch){ap.replaceRange("",at,{line:at.line+1,ch:0})}else{ap.replaceRange("",at,aq?ar:{line:at.line})}},deleteLine:function(ap){var aq=ap.getCursor().line;ap.replaceRange("",{line:aq,ch:0},{line:aq})},undo:function(ap){ap.undo()},redo:function(ap){ap.redo()},goDocStart:function(ap){ap.setCursor(0,0,true)},goDocEnd:function(ap){ap.setSelection({line:ap.lineCount()-1},null,true)},goLineStart:function(ap){ap.setCursor(ap.getCursor().line,0,true)},goLineStartSmart:function(ap){var at=ap.getCursor();var ar=ap.getLine(at.line),aq=Math.max(0,ar.search(/\S/));ap.setCursor(at.line,at.ch<=aq&&at.ch?0:aq,true)},goLineEnd:function(ap){ap.setSelection({line:ap.getCursor().line},null,true)},goLineUp:function(ap){ap.moveV(-1,"line")},goLineDown:function(ap){ap.moveV(1,"line")},goPageUp:function(ap){ap.moveV(-1,"page")},goPageDown:function(ap){ap.moveV(1,"page")},goCharLeft:function(ap){ap.moveH(-1,"char")},goCharRight:function(ap){ap.moveH(1,"char")},goColumnLeft:function(ap){ap.moveH(-1,"column")},goColumnRight:function(ap){ap.moveH(1,"column")},goWordLeft:function(ap){ap.moveH(-1,"word")},goWordRight:function(ap){ap.moveH(1,"word")},delCharLeft:function(ap){ap.deleteH(-1,"char")},delCharRight:function(ap){ap.deleteH(1,"char")},delWordLeft:function(ap){ap.deleteH(-1,"word")},delWordRight:function(ap){ap.deleteH(1,"word")},indentAuto:function(ap){ap.indentSelection("smart")},indentMore:function(ap){ap.indentSelection("add")},indentLess:function(ap){ap.indentSelection("subtract")},insertTab:function(ap){ap.replaceSelection("\t","end")},defaultTab:function(ap){if(ap.somethingSelected()){ap.indentSelection("add")}else{ap.replaceSelection("\t","end")}},transposeChars:function(ap){var ar=ap.getCursor(),aq=ap.getLine(ar.line);if(ar.ch>0&&ar.ch<aq.length-1){ap.replaceRange(aq.charAt(ar.ch)+aq.charAt(ar.ch-1),{line:ar.line,ch:ar.ch-1},{line:ar.line,ch:ar.ch+1})}},newlineAndIndent:function(ap){ap.replaceSelection("\n","end");ap.indentLine(ap.getCursor().line)},toggleOverwrite:function(ap){ap.toggleOverwrite()}};var w=v.keyMap={};w.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"};w.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};w.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};w["default"]=P?w.macDefault:w.pcDefault;w.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageUp","Shift-Ctrl-V":"goPageDown","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function c(ap){if(typeof ap=="string"){return w[ap]}else{return ap}}function m(aq,ap,av,at,ar){function au(aA){aA=c(aA);var ay=aA[aq];if(ay!=null&&at(ay)){return true}if(aA.nofallthrough){if(ar){ar()}return true}var ax=aA.fallthrough;if(ax==null){return false}if(Object.prototype.toString.call(ax)!="[object Array]"){return au(ax)}for(var aw=0,az=ax.length;aw<az;++aw){if(au(ax[aw])){return true}}return false}if(ap&&au(ap)){return true}return au(av)}function T(aq){var ap=U[z(aq,"keyCode")];return ap=="Ctrl"||ap=="Alt"||ap=="Shift"||ap=="Mod"}v.fromTextArea=function(aq,at){if(!at){at={}}at.value=aq.value;if(!at.tabindex&&aq.tabindex){at.tabindex=aq.tabindex}if(at.autofocus==null&&aq.getAttribute("autofocus")!=null){at.autofocus=true}function av(){aq.value=ap.getValue()}if(aq.form){var au=s(aq.form,"submit",av,true);if(typeof aq.form.submit=="function"){var ar=aq.form.submit;function aw(){av();aq.form.submit=ar;aq.form.submit();aq.form.submit=aw}aq.form.submit=aw}}aq.style.display="none";var ap=v(function(ax){aq.parentNode.insertBefore(ax,aq.nextSibling)},at);ap.save=av;ap.getTextArea=function(){return aq};ap.toTextArea=function(){av();aq.parentNode.removeChild(ap.getWrapperElement());aq.style.display="";if(aq.form){au();if(typeof aq.form.submit=="function"){aq.form.submit=ar}}};return ap};function q(at,ap){if(ap===true){return ap}if(at.copyState){return at.copyState(ap)}var ar={};for(var au in ap){var aq=ap[au];if(aq instanceof Array){aq=aq.concat([])}ar[au]=aq}return ar}v.copyState=q;function Y(ar,aq,ap){return ar.startState?ar.startState(aq,ap):true}v.startState=Y;function b(ap,aq){this.pos=this.start=0;this.string=ap;this.tabSize=aq||8}b.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(ap){var ar=this.string.charAt(this.pos);if(typeof ap=="string"){var aq=ar==ap}else{var aq=ar&&(ap.test?ap.test(ar):ap(ar))}if(aq){++this.pos;return ar}},eatWhile:function(ap){var aq=this.pos;while(this.eat(ap)){}return this.pos>aq},eatSpace:function(){var ap=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>ap},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ap){var aq=this.string.indexOf(ap,this.pos);if(aq>-1){this.pos=aq;return true}},backUp:function(ap){this.pos-=ap},column:function(){return o(this.string,this.start,this.tabSize)},indentation:function(){return o(this.string,null,this.tabSize)},match:function(at,aq,ap){if(typeof at=="string"){function au(av){return ap?av.toLowerCase():av}if(au(this.string).indexOf(au(at),this.pos)==this.pos){if(aq!==false){this.pos+=at.length}return true}}else{var ar=this.string.slice(this.pos).match(at);if(ar&&aq!==false){this.pos+=ar[0].length}return ar}},current:function(){return this.string.slice(this.start,this.pos)}};v.StringStream=b;function M(at,ar,aq,ap){this.from=at;this.to=ar;this.style=aq;this.marker=ap}M.prototype={attach:function(ap){this.marker.set.push(ap)},detach:function(aq){var ap=r(this.marker.set,aq);if(ap>-1){this.marker.set.splice(ap,1)}},split:function(at,ap){if(this.to<=at&&this.to!=null){return null}var ar=this.from<at||this.from==null?null:this.from-at+ap;var aq=this.to==null?null:this.to-at+ap;return new M(ar,aq,this.style,this.marker)},dup:function(){return new M(null,null,this.style,this.marker)},clipTo:function(aq,au,ap,at,ar){if(aq&&at>this.from&&(at<this.to||this.to==null)){this.from=null}else{if(this.from!=null&&this.from>=au){this.from=Math.max(at,this.from)+ar}}if(ap&&(au<this.to||this.to==null)&&(au>this.from||this.from==null)){this.to=null}else{if(this.to!=null&&this.to>au){this.to=at<this.to?this.to+ar:au}}},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(ap){return this.marker==ap.marker}};function I(ap){this.from=ap;this.to=ap;this.line=null}I.prototype={attach:function(ap){this.line=ap},detach:function(ap){if(this.line==ap){this.line=null}},split:function(aq,ap){if(aq<this.from){this.from=this.to=(this.from-aq)+ap;return this}},isDead:function(){return this.from>this.to},clipTo:function(aq,au,ap,at,ar){if((aq||au<this.from)&&(ap||at>this.to)){this.from=0;this.to=-1}else{if(this.from>au){this.from=this.to=Math.max(at,this.from)+ar}}},sameSet:function(ap){return false},find:function(){if(!this.line||!this.line.parent){return null}return{line:ab(this.line),ch:this.from}},clear:function(){if(this.line){var ap=r(this.line.marked,this);if(ap!=-1){this.line.marked.splice(ap,1)}this.line=null}}};function e(aq,ap){this.styles=ap||[aq,null];this.text=aq;this.height=1;this.marked=this.gutterMarker=this.className=this.bgClassName=this.handlers=null;this.stateAfter=this.parent=this.hidden=null}e.inheritMarks=function(au,ax){var at=new e(au),ap=ax&&ax.marked;if(ap){for(var ar=0;ar<ap.length;++ar){if(ap[ar].to==null&&ap[ar].style){var aq=at.marked||(at.marked=[]),aw=ap[ar];var av=aw.dup();aq.push(av);av.attach(at)}}}return at};e.prototype={replace:function(au,at,ax){var ay=[],ar=this.marked,av=at==null?this.text.length:at;ao(0,au,this.styles,ay);if(ax){ay.push(ax,null)}ao(av,this.text.length,this.styles,ay);this.styles=ay;this.text=this.text.slice(0,au)+ax+this.text.slice(av);this.stateAfter=null;if(ar){var aw=ax.length-(av-au);for(var aq=0;aq<ar.length;++aq){var ap=ar[aq];ap.clipTo(au==null,au||0,at==null,av,aw);if(ap.isDead()){ap.detach(this);ar.splice(aq--,1)}}}},split:function(ax,av){var at=[av,null],aq=this.marked;ao(ax,this.text.length,this.styles,at);var ar=new e(av+this.text.slice(ax),at);if(aq){for(var au=0;au<aq.length;++au){var aw=aq[au];var ap=aw.split(ax,av.length);if(ap){if(!ar.marked){ar.marked=[]}ar.marked.push(ap);ap.attach(ar);if(ap==aw){aq.splice(au--,1)}}}}return ar},append:function(aq){var aw=this.text.length,ap=aq.marked,au=this.marked;this.text+=aq.text;ao(0,aq.text.length,aq.styles,this.styles);if(au){for(var av=0;av<au.length;++av){if(au[av].to==null){au[av].to=aw}}}if(ap&&ap.length){if(!au){this.marked=au=[]}outer:for(var av=0;av<ap.length;++av){var ax=ap[av];if(!ax.from){for(var at=0;at<au.length;++at){var ar=au[at];if(ar.to==aw&&ar.sameSet(ax)){ar.to=ax.to==null?null:ax.to+aw;if(ar.isDead()){ar.detach(this);ap.splice(av--,1)}continue outer}}}au.push(ax);ax.attach(this);ax.from+=aw;if(ax.to!=null){ax.to+=aw}}}},fixMarkEnds:function(aq){var ap=this.marked,au=aq.marked;if(!ap){return}for(var at=0;at<ap.length;++at){var aw=ap[at],av=aw.to==null;if(av&&au){for(var ar=0;ar<au.length;++ar){if(au[ar].sameSet(aw)){av=false;break}}}if(av){aw.to=this.text.length}}},fixMarkStarts:function(){var ap=this.marked;if(!ap){return}for(var aq=0;aq<ap.length;++aq){if(ap[aq].from==null){ap[aq].from=0}}},addMark:function(ap){ap.attach(this);if(this.marked==null){this.marked=[]}this.marked.push(ap);this.marked.sort(function(ar,aq){return(ar.from||0)-(aq.from||0)})},highlight:function(av,aq,aw){var az=new b(this.text,aw),aA=this.styles,ax=0;var au=false,ar=aA[0],ay;if(this.text==""&&av.blankLine){av.blankLine(aq)}while(!az.eol()){var ap=av.token(az,aq);var at=this.text.slice(az.start,az.pos);az.start=az.pos;if(ax&&aA[ax-1]==ap){aA[ax-2]+=at}else{if(at){if(!au&&(aA[ax+1]!=ap||(ax&&aA[ax-2]!=ay))){au=true}aA[ax++]=at;aA[ax++]=ap;ay=ar;ar=aA[ax]}}if(az.pos>5000){aA[ax++]=this.text.slice(az.pos);aA[ax++]=null;break}}if(aA.length!=ax){aA.length=ax;au=true}if(ax&&aA[ax-2]!=ay){au=true}return au||(aA.length<5&&this.text.length<10?null:false)},getTokenAt:function(av,at,ar){var ap=this.text,au=new b(ap);while(au.pos<ar&&!au.eol()){au.start=au.pos;var aq=av.token(au,at)}return{start:au.start,end:au.pos,string:au.current(),className:aq||null,state:at}},indentation:function(ap){return o(this.text,null,ap)},getHTML:function(aP,ap,ar,au){var aA=[],ay=true,aw=0;function aL(a1,aZ){if(!a1){return}if(ay&&K&&a1.charAt(0)==" "){a1="\u00a0"+a1.slice(1)}ay=false;if(a1.indexOf("\t")==-1){aw+=a1.length;var a0=S(a1)}else{var a0="";for(var a2=0;;){var aX=a1.indexOf("\t",a2);if(aX==-1){a0+=S(a1.slice(a2));aw+=a1.length-a2;break}else{aw+=aX-a2;var aY=aP(aw);a0+=S(a1.slice(a2,aX))+aY.html;aw+=aY.width;a2=aX+1}}}if(aZ){aA.push('<span class="',aZ,'">',a0,"</span>")}else{aA.push(a0)}}var aO=aL;if(ap!=null){var aJ=0,aE='<span id="'+ar+'">';aO=function(a0,aY){var aX=a0.length;if(ap>=aJ&&ap<aJ+aX){if(ap>aJ){aL(a0.slice(0,ap-aJ),aY);if(au){aA.push("<wbr>")}}aA.push(aE);var aZ=ap-aJ;aL(N?a0.slice(aZ,aZ+1):a0.slice(aZ),aY);aA.push("</span>");if(N){aL(a0.slice(aZ+1),aY)}ap--;aJ+=aX}else{aJ+=aX;aL(a0,aY);if(aJ==ap&&aJ==aT){aA.push(aE+" </span>")}else{if(aJ>ap+10&&/\s/.test(a0)){aO=function(){}}}}}}var aI=this.styles,az=this.text,aF=this.marked;var aT=az.length;function av(aX){if(!aX){return null}return"cm-"+aX.replace(/ +/g," cm-")}if(!az&&ap==null){aO(" ")}else{if(!aF||!aF.length){for(var aQ=0,aB=0;aB<aT;aQ+=2){var aH=aI[aQ],aS=aI[aQ+1],aK=aH.length;if(aB+aK>aT){aH=aH.slice(0,aT-aB)}aB+=aK;aO(aH,av(aS))}}else{var ax=0,aQ=0,aD="",aS,aW=0;var aV=aF[0].from||0,aN=[],aU=0;function aR(){var aX;while(aU<aF.length&&((aX=aF[aU]).from==ax||aX.from==null)){if(aX.style!=null){aN.push(aX)}++aU}aV=aU<aF.length?aF[aU].from:Infinity;for(var aY=0;aY<aN.length;++aY){var aZ=aN[aY].to||Infinity;if(aZ==ax){aN.splice(aY--,1)}else{aV=Math.min(aZ,aV)}}}var aG=0;while(ax<aT){if(aV==ax){aR()}var aC=Math.min(aT,aV);while(true){if(aD){var at=ax+aD.length;var aq=aS;for(var aM=0;aM<aN.length;++aM){aq=(aq?aq+" ":"")+aN[aM].style}aO(at>aC?aD.slice(0,aC-ax):aD,aq);if(at>=aC){aD=aD.slice(aC-ax);ax=aC;break}ax=at}aD=aI[aQ++];aS=av(aI[aQ++])}}}}return aA.join("")},cleanUp:function(){this.parent=null;if(this.marked){for(var ap=0,aq=this.marked.length;ap<aq;++ap){this.marked[ap].detach(this)}}}};function ao(aw,ax,ap,ay){for(var au=0,av=0,aq=0;av<ax;au+=2){var ar=ap[au],at=av+ar.length;if(aq==0){if(at>aw){ay.push(ar.slice(aw-av,Math.min(ar.length,ax-av)),ap[au+1])}if(at>=aw){aq=1}}else{if(aq==1){if(at>ax){ay.push(ar.slice(0,ax-av),ap[au+1])}else{ay.push(ar,ap[au+1])}}}av=at}}function ak(aq){this.lines=aq;this.parent=null;for(var ar=0,at=aq.length,ap=0;ar<at;++ar){aq[ar].parent=this;ap+=aq[ar].height}this.height=ap}ak.prototype={chunkSize:function(){return this.lines.length},remove:function(ap,ax,av){for(var au=ap,aw=ap+ax;au<aw;++au){var aq=this.lines[au];this.height-=aq.height;aq.cleanUp();if(aq.handlers){for(var ar=0;ar<aq.handlers.length;++ar){av.push(aq.handlers[ar])}}}this.lines.splice(ap,ax)},collapse:function(ap){ap.splice.apply(ap,[ap.length,0].concat(this.lines))},insertHeight:function(aq,ar,ap){this.height+=ap;this.lines=this.lines.slice(0,aq).concat(ar).concat(this.lines.slice(aq));for(var au=0,av=ar.length;au<av;++au){ar[au].parent=this}},iterN:function(ap,au,ar){for(var aq=ap+au;ap<aq;++ap){if(ar(this.lines[ap])){return true}}}};function j(at){this.children=at;var ar=0,ap=0;for(var aq=0,av=at.length;aq<av;++aq){var au=at[aq];ar+=au.chunkSize();ap+=au.height;au.parent=this}this.size=ar;this.height=ap;this.parent=null}j.prototype={chunkSize:function(){return this.size},remove:function(ar,aq,aw){this.size-=aq;for(var au=0;au<this.children.length;++au){var ap=this.children[au],ax=ap.chunkSize();if(ar<ax){var av=Math.min(aq,ax-ar),ay=ap.height;ap.remove(ar,av,aw);this.height-=ay-ap.height;if(ax==av){this.children.splice(au--,1);ap.parent=null}if((aq-=av)==0){break}ar=0}else{ar-=ax}}if(this.size-aq<25){var az=[];this.collapse(az);this.children=[new ak(az)];this.children[0].parent=this}},collapse:function(ap){for(var aq=0,ar=this.children.length;aq<ar;++aq){this.children[aq].collapse(ap)}},insert:function(aq,ar){var ap=0;for(var au=0,av=ar.length;au<av;++au){ap+=ar[au].height}this.insertHeight(aq,ar,ap)},insertHeight:function(aq,az,ay){this.size+=az.length;this.height+=ay;for(var ar=0,av=this.children.length;ar<av;++ar){var ap=this.children[ar],aw=ap.chunkSize();if(aq<=aw){ap.insertHeight(aq,az,ay);if(ap.lines&&ap.lines.length>50){while(ap.lines.length>50){var au=ap.lines.splice(ap.lines.length-25,25);var ax=new ak(au);ap.height-=ax.height;this.children.splice(ar+1,0,ax);ax.parent=this}this.maybeSpill()}break}aq-=aw}},maybeSpill:function(){if(this.children.length<=10){return}var at=this;do{var aq=at.children.splice(at.children.length-5,5);var ar=new j(aq);if(!at.parent){var au=new j(at.children);au.parent=at;at.children=[au,ar];at=au}else{at.size-=ar.size;at.height-=ar.height;var ap=r(at.parent.children,at);at.parent.children.splice(ap+1,0,ar)}ar.parent=at.parent}while(at.children.length>10);at.parent.maybeSpill()},iter:function(ar,aq,ap){this.iterN(ar,aq-ar,ap)},iterN:function(ap,ay,ax){for(var aq=0,av=this.children.length;aq<av;++aq){var aw=this.children[aq],au=aw.chunkSize();if(ap<au){var ar=Math.min(ay,au-ap);if(aw.iterN(ap,ar,ax)){return true}if((ay-=ar)==0){break}ap=0}else{ap-=au}}}};function E(ap,au){while(!ap.lines){for(var aq=0;;++aq){var at=ap.children[aq],ar=at.chunkSize();if(au<ar){ap=at;break}au-=ar}}return ap.lines[au]}function ab(ap){if(ap.parent==null){return null}var av=ap.parent,au=r(av.lines,ap);for(var aq=av.parent;aq;av=aq,aq=aq.parent){for(var ar=0,at=aq.children.length;;++ar){if(aq.children[ar]==av){break}au+=aq.children[ar].chunkSize()}}return au}function aa(aw,au){var ar=0;outer:do{for(var at=0,av=aw.children.length;at<av;++at){var aq=aw.children[at],ap=aq.height;if(au<ap){aw=aq;continue outer}au-=ap;ar+=aq.chunkSize()}return ar}while(!aw.lines);for(var at=0,av=aw.lines.length;at<av;++at){var ay=aw.lines[at],ax=ay.height;if(au<ax){break}au-=ax}return ar+at}function h(ap,aw){var ar=0;outer:do{for(var aq=0,au=ap.children.length;aq<au;++aq){var av=ap.children[aq],at=av.chunkSize();if(aw<at){ap=av;continue outer}aw-=at;ar+=av.height}return ar}while(!ap.lines);for(var aq=0;aq<aw;++aq){ar+=ap.lines[aq].height}return ar}function l(){this.time=0;this.done=[];this.undone=[];this.compound=0;this.closed=false}l.prototype={addChange:function(ap,av,aq){this.undone.length=0;var ar=+new Date,ax=this.done[this.done.length-1],ay=ax&&ax[ax.length-1];var au=ar-this.time;if(this.compound&&ax&&!this.closed){ax.push({start:ap,added:av,old:aq})}else{if(au>400||!ay||this.closed||ay.start>ap+aq.length||ay.start+ay.added<ap){this.done.push([{start:ap,added:av,old:aq}]);this.closed=false}else{var aw=Math.max(0,ay.start-ap),az=Math.max(0,(ap+aq.length)-(ay.start+ay.added));for(var at=aw;at>0;--at){ay.old.unshift(aq[at-1])}for(var at=az;at>0;--at){ay.old.push(aq[aq.length-at])}if(aw){ay.start=ap}ay.added+=av-(aq.length-aw-az)}}this.time=ar},startCompound:function(){if(!this.compound++){this.closed=true}},endCompound:function(){if(!--this.compound){this.closed=true}}};function L(){x(this)}function R(ap){if(!ap.stop){ap.stop=L}return ap}function W(ap){if(ap.preventDefault){ap.preventDefault()}else{ap.returnValue=false}}function F(ap){if(ap.stopPropagation){ap.stopPropagation()}else{ap.cancelBubble=true}}function x(ap){W(ap);F(ap)}v.e_stop=x;v.e_preventDefault=W;v.e_stopPropagation=F;function k(ap){return ap.target||ap.srcElement}function y(ap){if(ap.which){return ap.which}else{if(ap.button&1){return 1}else{if(ap.button&2){return 3}else{if(ap.button&4){return 2}}}}}function z(aq,ar){var ap=aq.override&&aq.override.hasOwnProperty(ar);return ap?aq.override[ar]:aq[ar]}function s(at,ar,aq,ap){if(typeof at.addEventListener=="function"){at.addEventListener(ar,aq,false);if(ap){return function(){at.removeEventListener(ar,aq,false)}}}else{var au=function(av){aq(av||window.event)};at.attachEvent("on"+ar,au);if(ap){return function(){at.detachEvent("on"+ar,au)}}}}v.connect=s;function A(){this.id=null}A.prototype={set:function(ap,aq){clearTimeout(this.id);this.id=setTimeout(aq,ap)}};var ae=v.Pass={toString:function(){return"CodeMirror.Pass"}};var Q=/gecko\/\d{7}/i.test(navigator.userAgent);var K=/MSIE \d/.test(navigator.userAgent);var D=/MSIE [1-7]\b/.test(navigator.userAgent);var C=/MSIE [1-8]\b/.test(navigator.userAgent);var G=K&&document.documentMode==5;var g=/WebKit\//.test(navigator.userAgent);var ai=/Chrome\//.test(navigator.userAgent);var N=/Opera\//.test(navigator.userAgent);var i=/Apple Computer/.test(navigator.vendor);var n=/KHTML\//.test(navigator.userAgent);var f=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);var H=function(){if(C){return false}var ap=document.createElement("div");return"draggable" in ap||"dragDrop" in ap}();var d=function(){var ap=document.createElement("textarea");ap.value="foo\nbar";if(ap.value.indexOf("\r")>-1){return"\r\n"}return"\n"}();var p=/^$/;if(Q){p=/$'/}else{if(i){p=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/}else{if(ai){p=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/}}}function o(aq,ap,at){if(ap==null){ap=aq.search(/[^\s\u00a0]/);if(ap==-1){ap=aq.length}}for(var ar=0,au=0;ar<ap;++ar){if(aq.charAt(ar)=="\t"){au+=at-(au%at)}else{++au}}return au}function u(ap){if(ap.currentStyle){return ap.currentStyle}return window.getComputedStyle(ap,null)}function an(aq,az){var at=aq.ownerDocument.body;var ay=0,ax=0,av=false;for(var ap=aq;ap;ap=ap.offsetParent){var aw=ap.offsetLeft,ar=ap.offsetTop;if(ap==at){ay+=Math.abs(aw);ax+=Math.abs(ar)}else{ay+=aw,ax+=ar}if(az&&u(ap).position=="fixed"){av=true}}var au=az&&!av?null:at;for(var ap=aq.parentNode;ap!=au;ap=ap.parentNode){if(ap.scrollLeft!=null){ay-=ap.scrollLeft;ax-=ap.scrollTop}}return{left:ay,top:ax}}if(document.documentElement.getBoundingClientRect!=null){an=function(at,ap){try{var ar=at.getBoundingClientRect();ar={top:ar.top,left:ar.left}}catch(au){ar={top:0,left:0}}if(!ap){if(window.pageYOffset==null){var aq=document.documentElement||document.body.parentNode;if(aq.scrollTop==null){aq=document.body}ar.top+=aq.scrollTop;ar.left+=aq.scrollLeft}else{ar.top+=window.pageYOffset;ar.left+=window.pageXOffset}}return ar}}function J(ap){return ap.textContent||ap.innerText||ap.nodeValue||""}function a(ap){if(t){ap.selectionStart=0;ap.selectionEnd=ap.value.length}else{ap.select()}}function ag(aq,ap){return aq.line==ap.line&&aq.ch==ap.ch}function ac(aq,ap){return aq.line<ap.line||(aq.line==ap.line&&aq.ch<ap.ch)}function ad(ap){return{line:ap.line,ch:ap.ch}}var al=document.createElement("pre");function S(ap){al.textContent=ap;return al.innerHTML}if(S("a")=="\na"){S=function(ap){al.textContent=ap;return al.innerHTML.slice(1)}}else{if(S("\t")!="\t"){S=function(ap){al.innerHTML="";al.appendChild(document.createTextNode(ap));return al.innerHTML}}}v.htmlEscape=S;function Z(at,ar){if(!ar){return 0}if(!at){return ar.length}for(var aq=at.length,ap=ar.length;aq>=0&&ap>=0;--aq,--ap){if(at.charAt(aq)!=ar.charAt(ap)){break}}return ap+1}function r(at,ap){if(at.indexOf){return at.indexOf(ap)}for(var aq=0,ar=at.length;aq<ar;++aq){if(at[aq]==ap){return aq}}return -1}function aj(ap){return/\w/.test(ap)||ap.toUpperCase()!=ap.toLowerCase()}var B="\n\nb".split(/\n/).length!=3?function(ar){var at=0,aq,ap=[];while((aq=ar.indexOf("\n",at))>-1){ap.push(ar.slice(at,ar.charAt(aq-1)=="\r"?aq-1:aq));at=aq+1}ap.push(ar.slice(at));return ap}:function(ap){return ap.split(/\r?\n/)};v.splitLines=B;var ah=window.getSelection?function(aq){try{return aq.selectionStart!=aq.selectionEnd}catch(ap){return false}}:function(ar){try{var ap=ar.ownerDocument.selection.createRange()}catch(aq){}if(!ap||ap.parentElement()!=ar){return false}return ap.compareEndPoints("StartToEnd",ap)!=0};v.defineMode("null",function(){return{token:function(ap){ap.skipToEnd()}}});v.defineMIME("text/plain","null");var U={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};v.keyNames=U;(function(){for(var ap=0;ap<10;ap++){U[ap+48]=String(ap)}for(var ap=65;ap<=90;ap++){U[ap]=String.fromCharCode(ap)}for(var ap=1;ap<=12;ap++){U[ap+111]=U[ap+63235]="F"+ap}})();return v})();